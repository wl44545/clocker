<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="timer.component.scss">
</head>
<body>
  <div *ngIf="!timerActive" class="timer auto start">
    <button (click)="start()">{{'start' | translate}}</button>
  </div>
  <div *ngIf="timerActive" class="timer auto stop">

    <label>{{getHour()}}</label>
    <label>:</label>
    <label>{{getMinute()}}</label>
    <label>:</label>
    <label style="margin-right: 10px;">{{getSecund()}}</label>

    <input type="text" [(ngModel)]="localTimeTitle" [value]="localTimeTitle" (change)="changeHandler()"/>

    <select [(ngModel)]="localProject" (change)="changeHandler()">
      <option [value]=0>{{'noProject' | translate}}</option>
      <option *ngFor="let project of projects" [value]="project.id">{{ project.name }}</option>
    </select>

    <button (click)="saveChange()" *ngIf="update">Zatwierd≈∫ zmiany</button>
    <button (click)="stop()">{{'stop' | translate}}</button>
  </div>
  <div class="timer manual">
    <i class="icon far fa-comment-dots"></i>
    <input type="text" id="manualDescription" placeholder="{{'description' | translate}}" [(ngModel)]="manualDescription" name="manualDescription">
    <i class="icon fas fa-project-diagram"></i>
    <select [(ngModel)]="manualProject">
      <option [value]=0>{{'noProject' | translate}}</option>
      <option *ngFor="let project of projects" [value]="project.id">{{ project.name }}</option>
    </select>
    <i class="icon far fa-play-circle"></i>
    <input type="datetime-local" id="manualStart" placeholder="{{'start' | translate}}" step=1 [(ngModel)]="manualStart" name="manualStart">
    <i class="icon far fa-stop-circle"></i>
    <input type="datetime-local" id="manualStop" placeholder="{{'stop' | translate}}" step=1 [(ngModel)]="manualStop" name="manualStop">
    <button *ngIf="!entryEdit" (click)="addEntry()">{{'add' | translate}}</button>
    <button *ngIf="entryEdit" (click)="saveEntry()">{{'save' | translate}}</button>
  </div>
  <div class="entry" *ngFor="let entry of worklog">
    <div class="element">
      <i class="icon far fa-comment-dots marg"></i>
      {{entry.description}}
    </div>
    <div class="element">
      <i *ngIf="entry.projectName" class="icon fas fa-project-diagram"></i>
      {{entry.projectName}}
    </div>
    <div class="element">
      <i *ngIf="entry.clientName" class="icon far fa-building"></i>
      {{entry.clientName}}
    </div>
    <div class="element">
      <i class="icon far fa-play-circle"></i>
      {{entry.start.toString().replace("T"," ")}}
    </div>
    <div class="element">
      <i class="icon far fa-stop-circle"></i>
      {{entry.stop.toString().replace("T"," ")}}
    </div>
    <div class="element">
      <i class="icon fas fa-hourglass-start"></i>
      {{entry.timeDiff}}
    </div>
    <div class="panel">
      <i (click)="editEntry(entry)" class="fas fa-edit"></i>
      <i (click)="removeEntry(entry)" class="fa fa-trash" aria-hidden="true"></i>
    </div>
  </div>
  <div *ngIf="totalTime!='0:0:0'" class="timer">
    {{'totalTime' | translate}}: {{ totalTime }}
  </div>
</body>
</html>
